<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eternel Design Portal</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- React -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

<!-- Babel -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Icons -->
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://unpkg.com/lucide-react@latest"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
body { font-family:'Plus Jakarta Sans', sans-serif; }
.font-serif { font-family:'Playfair Display', serif; }
</style>
</head>

<body class="bg-[#fcfdfe]">
<div id="root"></div>

<script type="text/babel">

const { useState, useEffect } = React;
const { User, Calendar, HardDrive, Globe, Settings, Download, CheckCircle, Link:LinkIcon } = lucideReact;

/* ================================
   ðŸ”¥ PASTE YOUR FIREBASE KEYS HERE
================================ */

const firebaseConfig = {
  apiKey: "PASTE_HERE",
  authDomain: "PASTE_HERE",
  projectId: "PASTE_HERE",
  storageBucket: "PASTE_HERE",
  messagingSenderId: "PASTE_HERE",
  appId: "PASTE_HERE"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();
const appId = "eternel-design-portal";

/* ================================ */

const AVAILABLE_LANGUAGES = ["English","Arabic","French","Italian","Spanish","German","Turkish"];
const LOGO_URL = "https://lh3.googleusercontent.com/d/1A9ZVt5Fbh-r2aRnb79-x_6Fj10YVQ4O8";

const InputField = ({label,type="text",value,onChange}) => (
<div className="flex flex-col gap-1">
<label className="text-sm font-bold text-slate-600">{label}</label>
<input
className="px-4 py-3 border rounded-xl"
type={type}
value={value}
onChange={onChange}
required
/>
</div>
);

function App(){

const [user,setUser] = useState(null);
const [submitted,setSubmitted] = useState(false);
const [submissions,setSubmissions] = useState([]);
const [showAdmin,setShowAdmin] = useState(false);

const [form,setForm] = useState({
brideName:"",
groomName:"",
weddingDate:"",
languages:["English","Arabic"],
driveLink:""
});

useEffect(()=>{
auth.signInAnonymously();
auth.onAuthStateChanged(setUser);
},[]);

useEffect(()=>{
if(!user) return;

const ref = db
.collection("artifacts")
.doc(appId)
.collection("public")
.doc("data")
.collection("submissions");

return ref.onSnapshot(snap=>{
setSubmissions(snap.docs.map(d=>({id:d.id,...d.data()})));
});
},[user]);

async function submit(e){
e.preventDefault();

const ref = db
.collection("artifacts")
.doc(appId)
.collection("public")
.doc("data")
.collection("submissions");

await ref.add({
...form,
created: firebase.firestore.FieldValue.serverTimestamp()
});

setSubmitted(true);
}

function exportCSV(){
let rows = submissions.map(s =>
`${s.brideName},${s.groomName},${s.weddingDate}`
);
let csv = "Bride,Groom,Date\n"+rows.join("\n");
let blob = new Blob([csv]);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="eternel.csv";
a.click();
}

if(submitted){
return(
<div className="min-h-screen flex items-center justify-center">
<div className="bg-white p-10 rounded-3xl text-center shadow">
<CheckCircle size={60} className="mx-auto text-rose-500"/>
<h2 className="text-3xl font-serif mt-4">Submitted</h2>
<button onClick={()=>setSubmitted(false)}
className="mt-6 bg-black text-white px-6 py-3 rounded-xl">
Add Another
</button>
</div>
</div>
);
}

return(
<div>

<nav className="flex justify-between items-center p-6 bg-white shadow">
<div className="flex items-center gap-3">
<img src={LOGO_URL} className="h-10"/>
<h1 className="font-serif text-2xl">ETERNEL</h1>
</div>

<button onClick={()=>setShowAdmin(!showAdmin)}>
<Settings/>
</button>
</nav>

<main className="max-w-xl mx-auto p-6">

{!showAdmin && (

<form onSubmit={submit} className="space-y-6">

<InputField label="Bride Name"
value={form.brideName}
onChange={e=>setForm({...form,brideName:e.target.value})}/>

<InputField label="Groom Name"
value={form.groomName}
onChange={e=>setForm({...form,groomName:e.target.value})}/>

<InputField label="Wedding Date"
type="date"
value={form.weddingDate}
onChange={e=>setForm({...form,weddingDate:e.target.value})}/>

<InputField label="Google Drive Link"
value={form.driveLink}
onChange={e=>setForm({...form,driveLink:e.target.value})}/>

<div>
<p className="font-bold mb-2">Languages</p>
<div className="flex flex-wrap gap-2">
{AVAILABLE_LANGUAGES.map(l=>(
<button
type="button"
key={l}
onClick={()=>setForm(f=>({
...f,
languages: f.languages.includes(l)
? f.languages.filter(x=>x!==l)
: [...f.languages,l]
}))}
className={`px-3 py-1 rounded-xl border
${form.languages.includes(l)
?"bg-black text-white"
:"bg-white"}`}
>
{l}
</button>
))}
</div>
</div>

<button className="w-full bg-black text-white py-4 rounded-xl">
Submit
</button>

</form>
)}

{showAdmin && (
<div>
<div className="flex justify-between mb-4">
<h2 className="text-2xl font-serif">Dashboard</h2>
<button onClick={exportCSV}
className="bg-black text-white px-4 py-2 rounded">
<Download size={16}/> CSV
</button>
</div>

{submissions.map(s=>(
<div key={s.id}
className="bg-white p-4 mb-3 rounded-xl shadow flex justify-between">
<div>
<p className="font-bold">{s.brideName} & {s.groomName}</p>
<p className="text-sm">{s.weddingDate}</p>
</div>
{s.driveLink &&
<a href={s.driveLink} target="_blank">
<LinkIcon/>
</a>}
</div>
))}
</div>
)}

</main>
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);

</script>
</body>
</html>
