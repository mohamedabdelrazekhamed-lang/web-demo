<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Invitation - Layla & Omar</title>
    
    <link rel="icon" href="https://drive.google.com/thumbnail?id=1A9ZVt5Fbh-r2aRnb79-x_6Fj10YVQ4O8&sz=s800">

    <script src="https://drive.google.com/thumbnail?id=13d-4zydktAozpX6j0TvD3VJnGeuF2G6o&sz=s800"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Invitation - Layla & Omar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Cinzel:wght@400..900&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Tajawal:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-gold: #D4AF37; 
            --color-navy: #1B263B;
            --color-cream: #FDFBF7;
        }
        
        body {
            font-family: 'Lato', sans-serif;
            overflow: hidden; /* Prevent scrolling initially */
            background-color: var(--color-cream);
            color: var(--color-navy);
        }

        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-dancing-script { font-family: 'Dancing Script', cursive; }
        .font-tajawal { font-family: 'Tajawal', sans-serif; }
        
        .text-gold { color: var(--color-gold); }
        .bg-gold { background-color: var(--color-gold); }
        .border-gold { border-color: var(--color-gold); }
        
        /* --- 3D Gate Animation Styles --- */
        #page1 {
            perspective: 1200px;
        }

        .gate {
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            /* Elegant marble texture */
            background-image: url('https://images.unsplash.com/photo-1588011930968-3334687d0c75?q=80&w=1974&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            transition: transform 2.5s cubic-bezier(0.6, 0.05, 0.2, 1), filter 2.5s ease;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            z-index: 20;
            box-shadow: inset 0 0 80px rgba(27, 38, 59, 0.5);
        }
        
        /* Navy overlay on gates for elegance */
        .gate::after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(27, 38, 59, 0.3); 
            transition: opacity 2s ease;
        }

        .left-gate {
            left: 0;
            transform-origin: left center;
            border-right: 3px solid var(--color-gold);
        }
        html[dir="rtl"] .left-gate { transform-origin: right center; }

        .right-gate {
            left: 50%;
            transform-origin: right center;
            border-left: 3px solid var(--color-gold);
        }
        html[dir="rtl"] .right-gate { transform-origin: left center; }

        /* Open state */
        .gate-open .left-gate { 
            transform: rotateY(-110deg) translateX(-10px); 
            filter: brightness(0.5);
        }
        html[dir="rtl"] .gate-open .left-gate { 
            transform: rotateY(110deg) translateX(10px); 
        }

        .gate-open .right-gate { 
            transform: rotateY(110deg) translateX(10px); 
            filter: brightness(0.5);
        }
        html[dir="rtl"] .gate-open .right-gate { 
            transform: rotateY(-110deg) translateX(-10px); 
        }

        /* Content Overlay on Gates */
        #invitation-overlay {
            transition: opacity 1.2s ease, transform 1.2s ease, filter 1.2s ease;
        }

        .gate-open #invitation-overlay {
            opacity: 0;
            transform: scale(0.85) translateY(-20px);
            filter: blur(10px);
            pointer-events: none;
        }

        /* Page 2 (Details) Slide Up */
        #page2 {
            transform: translateY(100%);
            transition: transform 1.5s cubic-bezier(0.7, 0, 0.2, 1);
            background: radial-gradient(circle at 50% 50%, #FDFBF7 0%, #f4f1ea 100%);
        }

        .show-page2 #page2 {
             transform: translateY(0);
        }
        
        /* --- Scroll Reveal Animations --- */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 1s ease-out, transform 1s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Stagger delays for children */
        .stagger-1 { transition-delay: 100ms; }
        .stagger-2 { transition-delay: 200ms; }
        .stagger-3 { transition-delay: 300ms; }
        .stagger-4 { transition-delay: 400ms; }

        /* --- Floating Particles Canvas --- */
        #particles-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 30; /* Above gates, below overlay text */
            pointer-events: none;
        }

        /* --- Custom Button --- */
        .btn-royal {
            background: linear-gradient(135deg, #1B263B 0%, #304a6e 100%);
            color: #D4AF37;
            border: 1px solid #D4AF37;
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
        }
        .btn-royal::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.4), transparent);
            transition: left 0.6s ease;
            z-index: -1;
        }
        .btn-royal:hover::before {
            left: 100%;
        }
        .btn-royal:hover {
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            transform: translateY(-3px) scale(1.02);
            color: white;
            border-color: white;
        }

        /* --- Gallery --- */
        .gallery-item {
            overflow: hidden;
            border-radius: 4px;
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            z-index: 10;
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .gallery-item:hover img {
            transform: scale(1.15);
        }

        /* Floating background decoration on Page 2 */
        .floating-deco {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 10s infinite ease-in-out;
            z-index: 0;
            pointer-events: none;
        }
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, -20px); }
        }

        /* Pulse for countdown */
        @keyframes pulse-soft {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(0.95); opacity: 0.9; }
        }
        .animate-pulse-soft {
            animation: pulse-soft 2s infinite ease-in-out;
        }

    </style>
</head>
<body class="bg-[#FDFBF7]">

    <!-- Page 1: The Gates (Entry) -->
    <div id="page1" class="relative h-screen w-screen overflow-hidden bg-[#1B263B]">
        
        <!-- The Moving Gates -->
        <div class="left-gate gate"></div>
        <div class="right-gate gate"></div>
        
        <!-- Particle Canvas (Gold Dust) -->
        <canvas id="particles-canvas"></canvas>

        <!-- Top Controls (Language & Audio) -->
        <div class="absolute top-6 right-6 z-50 flex items-center gap-3">
             <button id="lang-toggle-btn" class="bg-[#1B263B]/80 backdrop-blur border border-gold/50 text-gold text-xs font-cinzel tracking-widest py-1.5 px-4 rounded hover:bg-gold hover:text-[#1B263B] transition-colors duration-300">
                 ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
             </button>
            <button id="audio-control" class="bg-[#1B263B]/80 backdrop-blur border border-gold/50 text-gold p-2 rounded-full hover:bg-gold hover:text-[#1B263B] transition-colors duration-300 group">
                <svg id="speaker-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
            </button>
        </div>
        
      <!-- Center Overlay Content -->
      <div id="invitation-overlay" class="absolute inset-0 z-40 flex flex-col items-center justify-center text-center p-6">
            <div class="bg-[#1B263B]/70 backdrop-blur-md p-10 md:p-14 border border-white/10 shadow-2xl rounded-sm transform transition-transform duration-500 hover:scale-[1.01]">
                <p class="font-cinzel text-white/90 tracking-[0.3em] text-xs md:text-sm uppercase mb-6 animate-[fadeIn_1s_ease-out]" data-lang-key="welcome">The Wedding Of</p>
                <h1 class="font-dancing-script text-6xl md:text-8xl text-gold drop-shadow-lg mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Layla <span class="text-white text-4xl">&</span> Omar</h1>
                <p class="font-playfair text-gray-200 text-lg md:text-xl italic mb-10 tracking-wide">October 25th, 2026</p>
                
                <button id="join-us-btn" class="btn-royal font-cinzel font-bold py-3 px-10 text-sm tracking-[0.2em] uppercase rounded-sm cursor-pointer">
                    <span data-lang-key="enterButton">Enter</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Page 2: The Details (Scrollable Content) -->
    <div id="page2" class="absolute inset-0 z-30 h-screen w-screen bg-[#FDFBF7] overflow-y-auto overflow-x-hidden scroll-smooth">
        
        <!-- Floating Decor Background -->
        <div class="floating-deco" style="top: 10%; left: -5%;"></div>
        <div class="floating-deco" style="bottom: 10%; right: -5%; animation-delay: -5s;"></div>

        <!-- Back Button -->
        <button id="back-btn" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur text-[#1B263B] py-2 px-4 rounded-sm shadow-md font-cinzel text-xs tracking-wider border border-[#1B263B]/10 hover:bg-[#1B263B] hover:text-white transition-all duration-300 hover:shadow-lg transform hover:-translate-x-1">
            <span data-lang-key="backButton">‚Üê Back</span>
        </button>

        <div class="max-w-5xl mx-auto text-center px-4 py-20 relative z-10">
            
            <!-- Header Section -->
            <div class="reveal-on-scroll">
                <p class="font-cinzel text-gold text-xs md:text-sm tracking-[0.3em] uppercase mb-4" data-lang-key="saveTheDate">Save The Date</p>
                <h2 class="font-playfair text-5xl md:text-6xl text-[#1B263B] mb-6">October 25th, 2026</h2>
                <div class="w-16 h-1 bg-gold mx-auto mb-10 rounded-full"></div>
                <p class="font-playfair text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed mb-12" data-lang-key="detailsSubtitle">We look forward to sharing this joyous occasion with you.</p>
            </div>

            <!-- Countdown (High Priority) -->
            <div id="countdown" class="flex flex-wrap justify-center gap-4 md:gap-6 mb-20 reveal-on-scroll stagger-1">
                <!-- JS injected here -->
            </div>

            <!-- Photo Gallery -->
            <div class="mb-20">
                <h3 class="font-cinzel text-2xl text-[#1B263B] mb-8 tracking-widest uppercase reveal-on-scroll" data-lang-key="galleryTitle">Our Moments</h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 h-[500px] md:h-[400px]">
                    <!-- Large featured image -->
                    <div class="gallery-item col-span-2 row-span-2 md:col-span-2 md:row-span-2 group reveal-on-scroll stagger-1">
                        <img src="https://drive.google.com/thumbnail?id=1IfwcgpU1uJrVDk51Dp-EG4EGnerg28gu&sz=s800" alt="Couple" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#1B263B]/60 to-transparent opacity-100 group-hover:opacity-40 transition-opacity duration-500"></div>
                        <div class="absolute bottom-4 left-4 text-white font-playfair italic text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform translate-y-2 group-hover:translate-y-0">Just said yes!</div>
                    </div>
                    <!-- Smaller images -->
                    <div class="gallery-item col-span-1 row-span-1 reveal-on-scroll stagger-2">
                        <img src="https://drive.google.com/thumbnail?id=1UJ70-d5Ts32abX0Kc6zggts2Pr3J8_eB&sz=s800" alt="Ring" loading="lazy">
                    </div>
                    <div class="gallery-item col-span-1 row-span-1 reveal-on-scroll stagger-3">
                        <img src="https://drive.google.com/thumbnail?id=1R_Isd-4_zEjI3aubVbfp6AWExUpg2KDB&sz=s800" alt="Hands" alt="Flower Details" loading="lazy">
                    </div>
                    <div class="gallery-item col-span-1 row-span-1 reveal-on-scroll stagger-2">
                         <img src="https://drive.google.com/thumbnail?id=1GhvnTWkwXuZTe_OJrpmpn7c1C2Voy-lW&sz=s800" alt="Venue" loading="lazy">
                    </div>
                    <div class="gallery-item col-span-1 row-span-1 reveal-on-scroll stagger-3">
                         <img src="https://drive.google.com/thumbnail?id=1gYJA-wyJe0WCOpDcn0Hyv4vqhhHgvPgm&sz=s800" alt="Hands" loading="lazy">
                    </div>
                </div>
                
                <div class="mt-6 reveal-on-scroll">
                     <!-- PUT YOUR GOOGLE DRIVE/ALBUM LINK BELOW inside the href="" -->
                     <a href="https://drive.google.com/drive/u/1/folders/1hXOaAvBWG_tKfdmvJCgNv4lsxZTrcMrI" target="_blank" class="inline-block text-gold border-b border-gold/50 pb-1 hover:text-[#1B263B] hover:border-[#1B263B] transition-all duration-300 font-cinzel text-xs tracking-wider uppercase transform hover:scale-105" data-lang-key="viewFullGallery">View Full Album</a>
                </div>
            </div>
            
            <!-- Events Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-20 text-left rtl:text-right px-4">
                <!-- Katb Ktab -->
                <div class="bg-white p-8 shadow-xl border-t-4 border-gold reveal-on-scroll stagger-1 transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-500 rounded-sm">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="text-3xl text-gold animate-bounce" style="animation-duration: 3s;">üìñ</div>
                        <h3 class="font-playfair text-2xl font-bold text-[#1B263B]" data-lang-key="ktabTitle">Katb El-Kitab</h3>
                    </div>
                    <div class="space-y-3 text-gray-600 font-light text-base mb-8">
                        <p class="flex items-center gap-2"><span class="font-bold text-[#1B263B]">üïí</span> 6:00 PM</p>
                        <p class="flex items-start gap-2"><span class="font-bold text-[#1B263B]">üìç</span> <span data-lang-key="ktabLocation">Mosque of Sariyat al-Jabal</span></p>
                        <p class="text-xs text-gray-400 pl-7" data-lang-key="ktabAddress">Salah Salem St, El-Sayeda Zainab, Cairo</p>
                    </div>
                     <div class="flex gap-3">
                         <a href="https://www.google.com/maps/place/Al+Fattah+Al+Alim+Mosque/@30.019764,31.5998259,17z/data=!3m1!4b1!4m6!3m5!1s0x14581f8a7e60c763:0x786b2a8cc27f10b5!8m2!3d30.019764!4d31.6024008!16s%2Fg%2F11j0v0w7r8?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="flex-1 text-center bg-[#1B263B] text-white py-2.5 rounded-sm text-xs uppercase tracking-wide hover:bg-gold transition-colors duration-300 shadow-md" data-lang-key="mapButton">Map</a>
                         <a id="cal-ktab" href="#" target="_blank" class="flex-1 text-center border border-[#1B263B] text-[#1B263B] py-2.5 rounded-sm text-xs uppercase tracking-wide hover:bg-[#1B263B] hover:text-white transition-colors duration-300" data-lang-key="calendarButton">Calendar</a>
                     </div>
                </div>

                <!-- Celebration -->
                <div class="bg-white p-8 shadow-xl border-t-4 border-gold reveal-on-scroll stagger-2 transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-500 rounded-sm">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="text-3xl text-gold animate-bounce" style="animation-duration: 3s; animation-delay: 1.5s;">ü•Ç</div>
                        <h3 class="font-playfair text-2xl font-bold text-[#1B263B]" data-lang-key="celebTitle">The Celebration</h3>
                    </div>
                    <div class="space-y-3 text-gray-600 font-light text-base mb-8">
                        <p class="flex items-center gap-2"><span class="font-bold text-[#1B263B]">üïí</span> <span data-lang-key="celebTime">8:00 PM onwards</span></p>
                        <p class="flex items-start gap-2"><span class="font-bold text-[#1B263B]">üìç</span> <span data-lang-key="celebLocation">Aurora Lounge</span></p>
                        <p class="text-xs text-gray-400 pl-7" data-lang-key="celebAddress">Ahmed Orabi Compound, Obour City</p>
                    </div>
                    <div class="flex gap-3">
                         <a href="https://maps.app.goo.gl/xuNfErX5iLXQ2mEW8" target="_blank" class="flex-1 text-center bg-[#1B263B] text-white py-2.5 rounded-sm text-xs uppercase tracking-wide hover:bg-gold transition-colors duration-300 shadow-md" data-lang-key="mapButton">Map</a>
                        <a id="cal-celeb" href="#" target="_blank" class="flex-1 text-center border border-[#1B263B] text-[#1B263B] py-2.5 rounded-sm text-xs uppercase tracking-wide hover:bg-[#1B263B] hover:text-white transition-colors duration-300" data-lang-key="calendarButton">Calendar</a>
                    </div>
                </div>
            </div>

            <!-- RSVP Section -->
            <div class="bg-[#1B263B] text-white p-8 md:p-12 shadow-2xl reveal-on-scroll relative overflow-hidden rounded-sm group">
                <!-- Animated Background Circle -->
                <div class="absolute -top-10 -right-10 w-40 h-40 border border-white/5 rounded-full transition-transform duration-1000 group-hover:scale-150"></div>
                <div class="absolute -bottom-10 -left-10 w-60 h-60 border border-white/5 rounded-full transition-transform duration-1000 group-hover:scale-110"></div>
                
                <div class="relative z-10 max-w-xl mx-auto">
                    <h3 class="font-cinzel text-3xl mb-2 text-gold" data-lang-key="rsvpTitle">RSVP</h3>
                    <p class="font-playfair italic text-gray-400 mb-8" data-lang-key="rsvpSubtitle">Kindly respond by September 1st</p>
                    
                    <form id="rsvp-form" class="text-left rtl:text-right space-y-6">
                        <div class="group/input">
                            <label for="name" class="block text-gold text-xs tracking-widest uppercase mb-2 group-focus-within/input:text-white transition-colors" data-lang-key="rsvpName">Full Name</label>
                            <input type="text" id="name" name="name" class="w-full bg-white/5 border border-white/20 text-white px-4 py-3 focus:outline-none focus:border-gold focus:bg-white/10 transition-all duration-300" required>
                        </div>

                        <div>
                            <span class="block text-gold text-xs tracking-widest uppercase mb-4" data-lang-key="rsvpAttend">Attendance</span>
                            <div class="space-y-3">
                                <label class="flex items-center cursor-pointer group p-2 hover:bg-white/5 rounded transition-colors">
                                    <input type="radio" name="attending" value="Both" class="h-4 w-4 text-gold border-white/20 focus:ring-gold bg-transparent" required>
                                    <span class="ml-3 text-gray-300 group-hover:text-white transition-colors text-sm" data-lang-key="rsvpBoth">Both Ceremonies</span>
                                </label>
                                <label class="flex items-center cursor-pointer group p-2 hover:bg-white/5 rounded transition-colors">
                                    <input type="radio" name="attending" value="Katb El-Kitab only" class="h-4 w-4 text-gold border-white/20 focus:ring-gold bg-transparent">
                                    <span class="ml-3 text-gray-300 group-hover:text-white transition-colors text-sm" data-lang-key="rsvpKtabOnly">Katb El-Kitab Only</span>
                                </label>
                                <label class="flex items-center cursor-pointer group p-2 hover:bg-white/5 rounded transition-colors">
                                    <input type="radio" name="attending" value="The Celebration only" class="h-4 w-4 text-gold border-white/20 focus:ring-gold bg-transparent">
                                    <span class="ml-3 text-gray-300 group-hover:text-white transition-colors text-sm" data-lang-key="rsvpCelebOnly">Celebration Only</span>
                                </label>
                                <label class="flex items-center cursor-pointer group p-2 hover:bg-white/5 rounded transition-colors">
                                    <input type="radio" name="attending" value="No" class="h-4 w-4 text-gold border-white/20 focus:ring-gold bg-transparent">
                                    <span class="ml-3 text-gray-300 group-hover:text-white transition-colors text-sm" data-lang-key="rsvpNo">Regretfully Decline</span>
                                </label>
                            </div>
                        </div>

                        <div id="guests-section" class="hidden transition-all duration-500 ease-in-out opacity-0 transform -translate-y-4">
                             <label for="guests" class="block text-gold text-xs tracking-widest uppercase mb-2" data-lang-key="rsvpGuests">Number of Guests</label>
                             <select id="guests" name="guests" class="w-full bg-white/5 border border-white/20 text-white px-4 py-3 focus:outline-none focus:border-gold focus:bg-white/10 transition-all duration-300 appearance-none cursor-pointer">
                                <option value="1" class="bg-[#1B263B] text-white">1 (Just Me)</option>
                                <option value="2" class="bg-[#1B263B] text-white">2 (+1 Guest)</option>
                                <option value="3" class="bg-[#1B263B] text-white">3 (+2 Guests)</option>
                                <option value="4" class="bg-[#1B263B] text-white">4 (+3 Guests)</option>
                                <option value="5" class="bg-[#1B263B] text-white">5 (+4 Guests)</option>
                             </select>
                        </div>

                        <button type="submit" id="rsvp-submit-btn" class="w-full bg-gold text-[#1B263B] font-bold py-3 px-6 uppercase tracking-widest hover:bg-white hover:shadow-lg transition-all duration-300 shadow-lg mt-4 disabled:bg-gray-500 disabled:cursor-not-allowed text-sm transform active:scale-95">
                            <span data-lang-key="rsvpSubmit">Confirm Attendance</span>
                        </button>
                    </form>
                    <div id="rsvp-message" class="mt-6 text-center font-playfair italic min-h-[20px]"></div>
                </div>
            </div>

            <footer class="mt-20 pb-8 text-[#1B263B]/50 font-cinzel text-xs tracking-widest reveal-on-scroll">
                <p data-lang-key="footer">With Love | Layla & Omar
                E T E R N E L . E G ¬© 2026. All Rights Reserved.</p>
            </footer>
        </div>
    </div>

    <audio id="background-music" loop>
    <source src="https://drive.google.com/file/d/1v4WxnmkD6wfi1D7200HmvSnXPBCzHtO0" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const joinUsBtn = document.getElementById('join-us-btn');
            const backBtn = document.getElementById('back-btn');
            const body = document.body;
            const langToggleBtn = document.getElementById('lang-toggle-btn');
            
            // Audio elements
            const bgMusic = document.getElementById('background-music');
            const audioControl = document.getElementById('audio-control');
            
            // --- Particle System (Gold Dust) ---
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            let particlesArray;

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 2;
                    this.speedX = (Math.random() * 0.4) - 0.2;
                    this.speedY = (Math.random() * 0.4) - 0.2;
                    this.opacity = Math.random() * 0.5 + 0.1;
                    this.color = '#D4AF37'; 
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    if (this.opacity > 0.01) this.opacity -= 0.002;
                    else this.opacity = Math.random() * 0.5 + 0.1;

                    // Wrap around screen
                    if (this.x > canvas.width) this.x = 0;
                    if (this.x < 0) this.x = canvas.width;
                    if (this.y > canvas.height) this.y = 0;
                    if (this.y < 0) this.y = canvas.height;
                }
                draw() {
                    ctx.fillStyle = `rgba(212, 175, 55, ${this.opacity})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            function initParticles() {
                particlesArray = [];
                for (let i = 0; i < 100; i++) {
                    particlesArray.push(new Particle());
                }
            }

            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < particlesArray.length; i++) {
                    particlesArray[i].update();
                    particlesArray[i].draw();
                }
                requestAnimationFrame(animateParticles);
            }

            initParticles();
            animateParticles();

            // Resize canvas on window resize
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                initParticles();
            });

            // --- Scroll Reveal Observer ---
            const observerOptions = {
                threshold: 0.15,
                rootMargin: "0px 0px -50px 0px"
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target); // Only animate once
                    }
                });
            }, observerOptions);

            const revealElements = document.querySelectorAll('.reveal-on-scroll');
            revealElements.forEach(el => observer.observe(el));

            // --- Gate & Navigation Animations ---
            joinUsBtn.addEventListener('click', () => {
                body.classList.add('gate-open');
                body.classList.add('show-page2');
                
                // Try playing music on entry
                if (bgMusic.paused) {
                    bgMusic.play().catch(e => console.log("Auto-play prevented"));
                }
                
                setTimeout(() => {
                    document.getElementById('page2').style.overflow = 'auto';
                }, 1500);
            });

            backBtn.addEventListener('click', () => {
                document.getElementById('page2').scrollTo({top: 0, behavior: 'smooth'});
                setTimeout(() => {
                    body.classList.remove('gate-open');
                    body.classList.remove('show-page2');
                }, 300);
            });

            audioControl.addEventListener('click', () => {
                if (bgMusic.paused) {
                    bgMusic.play();
                    audioControl.classList.remove('opacity-50');
                } else {
                    bgMusic.pause();
                    audioControl.classList.add('opacity-50');
                }
            });

            // --- Translations ---
            let currentLang = 'en';
            const translations = {
                en: {
                    welcome: "The Wedding Of",
                    enterButton: "Enter",
                    backButton: "‚Üê Back",
                    saveTheDate: "Save The Date",
                    detailsSubtitle: "We look forward to sharing this joyous occasion with you.",
                    galleryTitle: "Our Moments",
                    viewFullGallery: "View Full Album",
                    days: "Days", hours: "Hours", minutes: "Mins", seconds: "Secs",
                    countdownOver: "Today is the day!",
                    ktabTitle: "Katb El-Kitab",
                    ktabLocation: "Al Fattah Al Alim Mosque",
                    ktabAddress: "The New Capital's",
                    mapButton: "Map", calendarButton: "Calendar",
                    celebTitle: "The Celebration",
                    celebTime: "8:00 PM onwards",
                    celebLocation: "Hilton Pyramids Golf",
                    celebAddress: "El Wahat Rd, First 6th of October, Giza Governorate",
                    rsvpTitle: "RSVP",
                    rsvpSubtitle: "Kindly respond by September 1st",
                    rsvpName: "Full Name",
                    rsvpAttend: "Attendance",
                    rsvpBoth: "Both Ceremonies",
                    rsvpKtabOnly: "Katb El-Kitab Only",
                    rsvpCelebOnly: "Celebration Only",
                    rsvpNo: "Regretfully Decline",
                    rsvpGuests: "Number of Guests",
                    rsvpSubmit: "Confirm Attendance",
                    rsvpSuccess: "Thank you. We look forward to seeing you.",
                    rsvpError: "An error occurred. Please try again.",
                    rsvpLoading: "Sending...",
                    footer: "With Love | Layla & Omar"
                },
                ar: {
                    welcome: "ÿ≠ŸÅŸÑ ÿ≤ŸÅÿßŸÅ",
                    enterButton: "ÿØÿÆŸàŸÑ",
                    backButton: "ÿπŸàÿØÿ© ‚Üí",
                    saveTheDate: "ÿßÿ≠ŸÅÿ∏Ÿàÿß ÿßŸÑÿ™ÿßÿ±ŸäÿÆ",
                    detailsSubtitle: "ŸÖÿ≥ÿ™ŸÜŸäŸÜŸÉŸÖ ÿ™ÿ¥ÿßÿ±ŸÉŸàŸÜÿß ŸÅÿ±ÿ≠ÿ™ŸÜÿß",
                    galleryTitle: "ŸÑÿ≠ÿ∏ÿßÿ™ŸÜÿß",
                    viewFullGallery: "ÿπÿ±ÿ∂ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
                    days: "ŸäŸàŸÖ", hours: "ÿ≥ÿßÿπÿ©", minutes: "ÿØŸÇŸäŸÇÿ©", seconds: "ÿ´ÿßŸÜŸäÿ©",
                    countdownOver: "ÿ•ŸÜŸá ÿßŸÑŸäŸàŸÖ ÿßŸÑŸÖŸÜÿ™ÿ∏ÿ±!",
                    ktabTitle: "ŸÉÿ™ÿ® ÿßŸÑŸÉÿ™ÿßÿ®",
                    ktabLocation: "ŸÖÿ≥ÿ¨ÿØ ÿßŸÑŸÅÿ™ÿßÿ≠ ÿßŸÑÿπŸÑŸäŸÖ",
                    ktabAddress: "ÿßŸÑÿπÿßÿµŸÖÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©",
                    mapButton: "ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©", calendarButton: "ÿßŸÑÿ™ŸÇŸàŸäŸÖ",
                    celebTitle: "ÿ≠ŸÅŸÑ ÿßŸÑÿ≤ŸÅÿßŸÅ",
                    celebTime: "Ÿ®:Ÿ†Ÿ† ŸÖÿ≥ÿßÿ°Ÿã",
                    celebLocation: "ŸáŸäŸÑÿ™ŸàŸÜ ÿ®Ÿäÿ±ÿßŸÖŸäÿØÿ≤ ÿ¨ŸàŸÑŸÅ",
                    celebAddress: "ÿ∑ÿ±ŸäŸÇ ÿßŸÑŸàÿßÿ≠ÿßÿ™ÿå ÿßŸÑÿ≥ÿßÿØÿ≥ ŸÖŸÜ ÿ£ŸÉÿ™Ÿàÿ®ÿ±",
                    rsvpTitle: "ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ≠ÿ∂Ÿàÿ±",
                    rsvpSubtitle: "Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ±ÿØ ŸÇÿ®ŸÑ Ÿ° ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±",
                    rsvpName: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
                    rsvpAttend: "ÿßŸÑÿ≠ÿ∂Ÿàÿ±",
                    rsvpBoth: "ŸÉÿ™ÿ® ÿßŸÑŸÉÿ™ÿßÿ® ŸàÿßŸÑÿ≤ŸÅÿßŸÅ",
                    rsvpKtabOnly: "ŸÉÿ™ÿ® ÿßŸÑŸÉÿ™ÿßÿ® ŸÅŸÇÿ∑",
                    rsvpCelebOnly: "ÿßŸÑÿ≤ŸÅÿßŸÅ ŸÅŸÇÿ∑",
                    rsvpNo: "ÿ£ÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿßŸÑÿ≠ÿ∂Ÿàÿ±",
                    rsvpGuests: "ÿπÿØÿØ ÿßŸÑÿ£ŸÅÿ±ÿßÿØ",
                    rsvpSubmit: "ÿ™ÿ£ŸÉŸäÿØ",
                    rsvpSuccess: "ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ. ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ¥ÿ±ŸäŸÅŸÉŸÖ.",
                    rsvpError: "ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.",
                    rsvpLoading: "ÿ¨ÿßÿ± ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...",
                    footer: "ÿ®ŸÉŸÑ ÿßŸÑÿ≠ÿ® | ŸÑŸäŸÑŸâ Ÿà ÿπŸÖÿ±"
                }
            };

            function setLanguage(lang) {
                currentLang = lang;
                const elements = document.querySelectorAll('[data-lang-key]');
                elements.forEach(el => {
                    const key = el.dataset.langKey;
                    if (translations[lang][key]) {
                        // Fade out text change effect
                        el.style.opacity = '0';
                        setTimeout(() => {
                            el.innerHTML = translations[lang][key];
                            el.style.opacity = '1';
                        }, 200);
                    }
                });

                if (lang === 'ar') {
                    document.documentElement.setAttribute('dir', 'rtl');
                    document.documentElement.setAttribute('lang', 'ar');
                    langToggleBtn.textContent = 'English';
                    body.classList.add('font-tajawal');
                } else {
                    document.documentElement.setAttribute('dir', 'ltr');
                    document.documentElement.setAttribute('lang', 'en');
                    langToggleBtn.textContent = 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©';
                    body.classList.remove('font-tajawal');
                }
                updateCountdown(); 
            }

            langToggleBtn.addEventListener('click', () => {
                setLanguage(currentLang === 'en' ? 'ar' : 'en');
            });


            // --- Countdown ---
            const countdownEl = document.getElementById('countdown');
            const weddingDate = new Date('2026-10-25T18:00:00+03:00').getTime();

            function updateCountdown() {
                const now = new Date().getTime();
                const distance = weddingDate - now;

                if (distance < 0) {
                    countdownEl.innerHTML = `<div class="text-center w-full font-playfair text-3xl text-gold animate-bounce">${translations[currentLang].countdownOver}</div>`;
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                const seconds = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');

                const makeBox = (val, label, animate = false) => `
                    <div class="flex flex-col items-center justify-center border border-[#1B263B]/10 bg-white w-20 h-24 rounded-sm shadow-md transition-transform hover:scale-105 ${animate ? 'animate-pulse-soft' : ''}">
                        <span class="font-playfair font-bold text-3xl text-[#1B263B]">${val}</span>
                        <span class="font-cinzel text-[10px] uppercase tracking-wider text-gray-400 mt-1">${label}</span>
                    </div>
                `;

                countdownEl.innerHTML = `
                    ${makeBox(days, translations[currentLang].days)}
                    ${makeBox(hours, translations[currentLang].hours)}
                    ${makeBox(minutes, translations[currentLang].minutes)}
                    ${makeBox(seconds, translations[currentLang].seconds, true)}
                `;
            }
            setInterval(updateCountdown, 1000);
            updateCountdown();

            // --- RSVP Logic ---
            const rsvpForm = document.getElementById('rsvp-form');
            const guestsSection = document.getElementById('guests-section');
            const rsvpMessage = document.getElementById('rsvp-message');
            const rsvpSubmitBtn = document.getElementById('rsvp-submit-btn');
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyGqz-MLzmVakhe7N-vs-chQOGC3OLyBb4CZxt79_MPtdqHgGI2psPQYavps0wZA9n9bw/exec'; 

            const attendingOptions = ['Both', 'Katb El-Kitab only', 'The Celebration only'];

            rsvpForm.attending.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    if (attendingOptions.includes(e.target.value)) {
                        guestsSection.classList.remove('hidden');
                        // Small delay to allow display:block to apply before changing opacity
                        setTimeout(() => {
                            guestsSection.classList.remove('opacity-0', '-translate-y-4');
                        }, 10);
                        document.getElementById('guests').required = true;
                    } else {
                        guestsSection.classList.add('opacity-0', '-translate-y-4');
                        setTimeout(() => {
                            guestsSection.classList.add('hidden');
                        }, 300);
                        document.getElementById('guests').required = false;
                    }
                });
            });

            rsvpForm.addEventListener('submit', (e) => {
                e.preventDefault();
                rsvpSubmitBtn.disabled = true;
                rsvpSubmitBtn.querySelector('span').textContent = translations[currentLang].rsvpLoading;

                const formData = new FormData(rsvpForm);
                const attendingValue = formData.get('attending');
                
                const data = {
                    name: formData.get('name'),
                    attending: attendingValue,
                    guests: attendingOptions.includes(attendingValue) ? formData.get('guests') : 0
                };
                
                fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    cache: 'no-cache',
                    headers: {'Content-Type': 'application/json'},
                    redirect: 'follow',
                    body: JSON.stringify(data)
                })
                .then(res => {
                    rsvpMessage.textContent = translations[currentLang].rsvpSuccess;
                    rsvpMessage.className = 'mt-6 text-center text-green-600 font-cinzel animate-[fadeIn_0.5s_ease]';
                    rsvpForm.reset();
                    guestsSection.classList.add('hidden', 'opacity-0');
                })
                .catch(error => {
                    rsvpMessage.textContent = translations[currentLang].rsvpError;
                    rsvpMessage.className = 'mt-6 text-center text-red-600 font-cinzel animate-[fadeIn_0.5s_ease]';
                })
                .finally(() => {
                     rsvpSubmitBtn.disabled = false;
                     rsvpSubmitBtn.querySelector('span').textContent = translations[currentLang].rsvpSubmit;
                });
            });

             // Calendar & Maps logic
             function generateGoogleCalendarLink({ title, startTime, endTime, location, details }) {
                const toUtcString = (date) => date.toISOString().replace(/[-:.]/g, '').slice(0, 15) + 'Z';
                const baseUrl = 'https://www.google.com/calendar/render?action=TEMPLATE';
                const params = new URLSearchParams({
                    text: title,
                    dates: `${toUtcString(startTime)}/${toUtcString(endTime)}`,
                    location: location,
                    details: details
                });
                return `${baseUrl}&${params.toString()}`;
            }

            const ktabEvent = {
                title: 'Katb El-Kitab: Layla & Omar',
                startTime: new Date('2025-10-12T18:00:00+03:00'),
                endTime: new Date('2025-10-12T19:00:00+03:00'),
                location: 'Mosque of Sariyat al-Jabal',
                details: 'Katb El-Kitab ceremony.'
            };
            const celebEvent = {
                title: 'Wedding: Layla & Omar',
                startTime: new Date('2025-10-12T20:00:00+03:00'),
                endTime: new Date('2025-10-13T00:00:00+03:00'),
                location: 'Aurora lounge, Obour',
                details: 'Wedding celebration.'
            };

            document.getElementById('cal-ktab').href = generateGoogleCalendarLink(ktabEvent);
            document.getElementById('cal-celeb').href = generateGoogleCalendarLink(celebEvent);
            
            setLanguage('en');
        });
    </script>
</body>
</html>
